# 不同编译器对于C中内存异常访问行为处理不一致


## 描述

当时我使用Visual Studio IDE来完成实验，代码能够成功运行，但两年后当我在整理代码是使用g++自行编译测试时却发现程序运行异常。
```shell
g++ main.cpp KMP.h KMP.cpp -o a
```
经过Debug发现，问题出在KMP算法中对字符数组的访问上。以下是我的理解：

在程序中字符数组`char* t`储存了待匹配的字符串，而KMP算法中会用到`t[-1]`语句，VS中编译器对于此‘野指针’的访问不做保护处理，因此仍然可以读出随机非空字符；而g++则进行了保护措施，对`t[-1]`的访问将会得到`\0`，即空字符。正是这一区别导致了我在命令行手动编译程序出错。

## 处理

知道症结所在，处理起来就比较方便了。只要将`scanf`语句读到的字符数组从`t[1]`位置开始储存，并手动往`t[0]`出赋一个非空合法字符即可。
